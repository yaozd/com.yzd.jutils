# REDIS事务
## [Redis事务详解，Redis事务不支持回滚吗？](https://baijiahao.baidu.com/s?id=1613631210471699441&wfr=spider&for=pc)特别推荐-byArvin-2019-07-26
```
MULTI, EXEC, DISCARD 和WATCH命令是Redis事务操作的基础 。他们可以让Redis在一个步骤里执行一组命令，且能做到如下2个重要保证:
事务中的所有命令都是序列化且都是按顺序执行的。在一个客户端执行Redis事务的过程中，不会接收其他任何客户端对它发出的请求。这保证了这些命令是作为一个单独的独立操作执行的。
所有的命令要么都被一起处理，要么全都没有被处理，所以Redis事务是原子的。EXEC会命令触发事务中所有命令的执行。当正在使用AOF时，Redis会使用一个简单的write（2）系统级调用来确保把事务写入到磁盘。但是，如果Redis服务崩溃，或者被系统管理员以某种强制的方式杀死，那么可能只有部分命令被写入到磁盘。Redis在重新启动时会检测这种情况，并报错，然后退出。使用 redis-check-aof工具可以检查AOF，并移除那不完整的事务，使服务可以再次启动

从 2.2 开始, Redis 可以用另外一个形式（乐观锁）来确保以上2点，后面讲详细讨论.
```
## [为什么Redis不支持回滚]()
```
Redis命令在事务中可能会执行失败，但是Redis事务不会回滚，而是继续会执行余下的命令。如果您有一个关系型数据库的知识，这对您来说可能会感到奇怪，因为关系型数据在这种情况下都是会回滚的。

Redis这样做，主要是因为:

只有当发生语法错误(这个问题在命令队列时无法检测到)了，Redis命令才会执行失败, 或对keys赋予了一个类型错误的数据：这意味着这些都是程序性错误，这类错误在开发的过程中就能够发现并解决掉，几乎不会出现在生产环境。
由于不需要回滚，这使得Redis内部更加简单，而且运行速度更快。
```