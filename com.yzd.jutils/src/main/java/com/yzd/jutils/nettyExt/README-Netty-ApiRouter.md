## API-ROUTER

### 关键指标
- 系统指标：CPU、内存、网络连通性、线路带宽、文件描述符、
- 应用指标：速率、异常错误、响应实际、GC
- 业务指标：连接数、请求错误数、请求延迟时间、请求堆积数

### 调试汇总
- 故障注入：保证所有的数据处理路由条件全覆盖。
```
目前API-ROUTER需要人为进行故障注入的方式来模拟场景
故障注入点：
1.中断
2.异常
3.正常数据处理逻辑
PS:
通入故障注入的方式，保证所有的数据处理路由条件全覆盖。
```

### 问题汇总
- ReferData数据丢失问题
```
在同一个后端服务有多个节点，但节点网络不稳定时，进过两次以上数据挂起，然后再次请求时，存在数据丢失的情况。
http2的ReferData数据的引用计数为共享计数，所以每次发送完，要把ReferData中的数据进行移除，否则会导致引用计数，
在请求超时的情况下计数错误，多减了一次。然连接失败后，数据需要重新加入到ReferData数据集合当中。
PS:解决思路 
根据监控与路由日志，寻找可能出问题的关键故障点。
```