# 垃圾回收
- [史上最全！2020面试阿里，字节跳动90%被问到的JVM面试题（附答案）](https://www.jianshu.com/p/49e76079243d)
```
java中有四种垃圾回收算法，分别是标记清除法、标记整理法、复制算法、分代收集算法
有哪几种垃圾回收器，有哪些优缺点？cms和g1的区别？
垃圾回收器主要分为以下几种：Serial、ParNew、Parallel Scavenge、Serial Old、Parallel Old、CMS、G1；
Serial:
单线程的收集器，收集垃圾时，必须stop the world，使用复制算法。

ParNew:
Serial收集器的多线程版本，也需要stop the world，复制算法.

Parallel Scavenge:
新生代收集器，复制算法的收集器，并发的多线程收集器，目标是达到一个可控的吞吐量，和ParNew的最大区别是GC自动调节策略；虚拟机会根据系统的运行状态收集性能监控信息，动态设置这些参数，以提供最优停顿时间和最高的吞吐量；

Serial Old：
Serial收集器的老年代版本，单线程收集器，使用标记整理算法。

Parallel Old：
是Parallel Scavenge收集器的老年代版本，使用多线程，标记-整理算法。

CMS:
是一种以获得最短回收停顿时间为目标的收集器，标记清除算法，运作过程：初始标记，并发标记，重新标记，并发清除，收集结束会产生大量空间碎片；

G1:
标记整理算法实现，运作流程主要包括以下：初始标记，并发标记，最终标记，筛选回收。不会产生空间碎片，可以精确地控制停顿；

```

## CMS、G1、ZGC的堆内存实现区别
- [CMS、G1、ZGC的堆内存实现区别](https://www.jianshu.com/p/2957b001645d)
```
1.
和G1类似，但ZGC的region的大小更加灵活和动态。zgc的region不会像G1那样在一开始就被划分为固定大小的region。
zgc的region核心亮点就是：动态。
2.
动态表现为：
动态地创建和销毁。
动态地决定region的大小。它的最小单位是2MB的一个块。然后每个region的大小就是是2MB*N就是。

```

## ZGC (jdk 15)
- [ZGC有什么缺点?](https://www.zhihu.com/question/356585590)
```
既然ZGC相比G1，CMS有诸多优点，那么它的缺点是什么，如果没有，为什么不全面淘汰G1
1.作者：dwing
虽然ZGC属于最新的GC技术, 但优点不一定真的出众. ZGC只在特定情况下具有绝对的优势, 
如巨大的堆和极低的暂停需求. 而实际上大多数开发在这两方面都不太成问题(尤其是在服务器端), 
而对GC的性能/效率更在意. GC技术这些年其实并没有很大的发展, 也就是说没有银弹, 
某些方面具有优势肯定是牺牲其它方面换来的, ZGC也很明显, 官方的设定目标是不损失超过15%的G1GC性能, 
也就是说从吞吐速率上肯定无法跟G1相比了, 更没法跟完全STW的GC去比.ZGC目前还在实验阶段, 
后续某个版本才会转正.ZGC目前还只支持Linux, 从JDK14开始支持Mac和Windows.所以谈ZGC全面淘汰G1, 在可见的未来都不可能.
2.作者：大黄鸭
zgc是为大内存、多cpu而生，它通过分区的思路来降低STW，比如原来我有一个巨大的房间需要打扫卫生，
每打扫一次就需要很长时间的STW，因为房间太大了，后来我改变了思路，把这个巨大的房间打隔断，
最终出来100个小房间，这些小房间可以是eden区、可以是s区、也可以是old区，没有固定，
每次只选择最需要打扫的房间(垃圾最多的)进行打扫，最终把这个房间的存活对象转移到其它房间，
同时其它房间还可以继续供客户使用，也就是并行、并发的打扫，只在某几个必须的阶段进行很短暂的STW，
其它时间都是和用户线程并行工作，这样可以很好的控制STW时间，同时也因为占用了很多cpu时间并发干活导致吞吐量降低，
所以如果硬件充足的情况下 可以考虑 ZGC。

```